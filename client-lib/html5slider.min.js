(function(){function n(){l.call(document.querySelectorAll("input[type=range]"),p);(new MutationObserver(function(a){a.forEach(function(a){a.addedNodes&&l.call(a.addedNodes,function(a){D(a);a.childElementCount&&l.call(a.querySelectorAll("input"),D)})})})).observe(document,{childList:!0,subtree:!0})}function D(a){"input"==a.localName&&"range"!=a.type&&"range"==a.getAttribute("type")&&p(a)}function p(a){function f(a){var b=(parseFloat(getComputedStyle(this,0).width)-g.width)/h;b&&(u+=(a.clientX-v)/b,
v=a.clientX,q=!0,this.value=u)}function C(){this.removeEventListener("mousemove",f,!0);this.removeEventListener("mouseup",C,!0)}function l(){w||(this.style.boxShadow=d?"inset 0 0 20px rgba(0,127,255,.1), 0 0 1px rgba(0,127,255,.4)":"0 0 0 2px #fb0")}function r(a){return!isNaN(a)&&+a==parseFloat(a)}function n(){e=r(a.min)?+a.min:0;m=r(a.max)?+a.max:100;m<e&&(m=100<e?e:100);k=r(a.step)&&0<a.step?+a.step:1;h=m-e;x(!0)}function x(f){y||z||(c=a.getAttribute("value"));r(c)||(c=(e+m)/2);c=Math.round((c-
e)/k)*k+e;c<e?c=e:c>m&&(c=e+~~(h/k)*k);q&&c!=A&&a.dispatchEvent(E);q=!1;if(f||c!=A)A=c,B(a,{background:"-moz-element(#__sliderthumb__) "+(h?(c-e)/h*100:0)+"% no-repeat, "+F})}var y,z,q,w,A,u,v,e,m,k,h,c=a.value;t||(t=document.body.appendChild(document.createElement("hr")),B(t,{"-moz-appearance":d?"scale-horizontal":"scalethumb-horizontal",display:"block",visibility:"visible",opacity:1,position:"fixed",top:"-999999px"}),document.mozSetImageElement("__sliderthumb__",t));var p=function(){return""+c};
a.__defineGetter__("value",p);a.__defineSetter__("value",function G(b){c=""+b;y=!0;x();delete a.value;a.value=c;a.__defineGetter__("value",p);a.__defineSetter__("value",G)});a.__defineGetter__("type",function(){return"range"});["min","max","step"].forEach(function(b){a.hasAttribute(b)&&(z=!0);a.__defineGetter__(b,function(){return this.hasAttribute(b)?this.getAttribute(b):""});a.__defineSetter__(b,function(a){null===a?this.removeAttribute(b):this.setAttribute(b,a)})});a.readOnly=!0;B(a,H);n();(new MutationObserver(function(b){b.forEach(function(b){"value"!=
b.attributeName?(n(),z=!0):y||(c=a.getAttribute("value"),x())})})).observe(a,I);a.addEventListener("mousedown",function(a){w=!0;setTimeout(function(){w=!1},0);if(!a.button&&h){var b=(parseFloat(getComputedStyle(this,0).width)-g.width)/h;if(b){var d=a.clientX-this.getBoundingClientRect().left-g.width/2-(c-e)*b;Math.abs(d)>g.radius&&(q=!0,this.value-=-d/b);u=c;v=a.clientX;this.addEventListener("mousemove",f,!0);this.addEventListener("mouseup",C,!0)}}},!0);a.addEventListener("keydown",function(a){36<
a.keyCode&&41>a.keyCode&&(l.call(this),q=!0,this.value=c+(38==a.keyCode||39==a.keyCode?k:-k))},!0);a.addEventListener("focus",l,!0);a.addEventListener("blur",function(){this.style.boxShadow=""},!0)}function B(a,d){for(var f in d)a.style.setProperty(f,d[f],"important")}var f=document.createElement("input");try{if(f.type="range","range"==f.type)return}catch(a){return}f.style.background="linear-gradient(red, red)";if(f.style.backgroundImage&&"MozAppearance"in f.style&&document.mozSetImageElement&&this.MutationObserver){var t,
d="MacIntel"==navigator.platform,g={radius:d?9:6,width:d?22:12,height:d?16:20},F="linear-gradient(transparent "+(d?"6px, #999 6px, #999 7px, #ccc 8px, #bbb 9px, #bbb 10px, transparent 10px":"9px, #999 9px, #bbb 10px, #fff 11px, transparent 11px")+", transparent)",H={"min-width":g.width+"px","min-height":g.height+"px","max-height":g.height+"px",padding:"0 0 "+(d?"2px":"1px"),border:0,"border-radius":0,cursor:"default","text-indent":"-999999px"},I={attributes:!0,attributeFilter:["min","max","step",
"value"]},l=Array.prototype.forEach,E=document.createEvent("HTMLEvents");E.initEvent("change",!0,!1);"loading"==document.readyState?document.addEventListener("DOMContentLoaded",n,!0):n()}})();
